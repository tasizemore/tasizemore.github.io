<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSVP - Carly & Tim</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">C & T</a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="rsvp.html" class="active">RSVP</a></li>
                <li><a href="https://www.amazon.com/wedding/share/carly-and-tim" target="_blank" rel="noopener noreferrer" class="registry-btn">Registry</a></li>
            </ul>
        </div>
    </nav>

    <section class="rsvp-section">
        <div class="container">
            <h2>RSVP</h2>
            <p>Please respond by September 1st, 2026</p>

            <form id="rsvp-form" class="rsvp-form">
                
                <div class="form-group">
                    <label for="name">Full Name(s)</label>
                    <input type="text" id="name" name="name" placeholder="Bilbo Baggins" required>
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" placeholder="bilbo@shire.com" required>
                </div>

                <div class="form-group">
                    <label>Will you be attending?</label>
                    <div class="radio-group">
                        <label><input type="radio" name="attendance" value="I'm ready for an adventure!" required> I'm ready for an adventure!</label>
                        <label><input type="radio" name="attendance" value="Alas, I cannot venture forth."> Alas, I cannot venture forth.</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="guests">Number of Guests</label>
                    <select id="guests" name="guests">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="dietary">Dietary Restrictions</label>
                    <textarea id="dietary" name="message" placeholder="Boil 'em, mash 'em, stick 'em in a stew..."></textarea>
                </div>

                <button type="submit" id="submit-btn">Send RSVP</button>
            </form>
        </div>
    </section>

    <script>
      const scriptURL = 'https://script.google.com/macros/s/AKfycbzzgFnxj9566GoI-kkNamoZTDo5CU3vkkrjF4_fWMEJ4eL0sK1W1aBDPQtS4G97Jek/exec';
      const form = document.getElementById('rsvp-form');
      const btn = document.getElementById('submit-btn');

      form.addEventListener('submit', e => {
        e.preventDefault();
        
        btn.disabled = true;
        btn.innerHTML = "Sending to the Shire...";

        fetch(scriptURL, { method: 'POST', body: new FormData(form)})
          .then(response => {
              console.log('Success!', response);
              window.location.href = "thank-you.html";
          })
          .catch(error => {
              console.error('Error!', error.message);
              alert('Something went wrong. Please try again!');
              btn.disabled = false;
              btn.innerHTML = "Send RSVP";
          });
      });
    </script>

</body>
</html>